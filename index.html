<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tsuchiura Sound Archive</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<style>
  html,body{height:100%;margin:0;background:#0c0f13;color:#e8e0c9;}
  #map{height:100vh;}
  .brand{position:fixed;left:12px;bottom:12px;padding:6px 10px;background:#111a;
    color:#f0d27a;border:1px solid #f0d27a55;border-radius:999px;font-size:12px;}
  .hud{position:fixed;right:12px;top:12px;background:#111a;color:#f0d27a;
    border:1px solid #f0d27a55;font:12px/1.2 system-ui;padding:8px 10px;
    border-radius:10px;}
</style>
</head>
<body>
<div id="map"></div>
<div class="brand">Tsuchiura Archive</div>
<div class="hud">üìç x:<span id="px">‚Äî</span> / y:<span id="py">‚Äî</span></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  const IMG_URL='tsuchiura_map.jpg'; // ‚Üê„Ç¢„ÉÉ„Éó„Åó„ÅüÁîªÂÉèÂêç
  const IMG_WIDTH=2000;  // ‚ÜêÁîªÂÉè„ÅÆÊ®™ÂπÖ(px)
  const IMG_HEIGHT=1200; // ‚ÜêÁîªÂÉè„ÅÆÈ´ò„Åï(px)

  const bounds=[[0,0],[IMG_HEIGHT,IMG_WIDTH]];
  const map=L.map('map',{crs:L.CRS.Simple,minZoom:-2,maxZoom:2});
  L.imageOverlay(IMG_URL,bounds).addTo(map);
  map.fitBounds(bounds);

  const toLatLng=(x,y)=>map.unproject([x,y],map.getMaxZoom());
  const toPixel=(latlng)=>map.project(latlng,map.getMaxZoom());

  map.on('click',e=>{
    const pt=toPixel(e.latlng);
    document.getElementById('px').textContent=Math.round(pt.x);
    document.getElementById('py').textContent=Math.round(pt.y);
    L.circleMarker(e.latlng,{radius:4,color:'#f0d27a',fill:true,fillOpacity:.6}).addTo(map)
      .bindTooltip(`x:${Math.round(pt.x)} / y:${Math.round(pt.y)}`,{permanent:false}).openTooltip();
  });
</script>
</body>
</html>
